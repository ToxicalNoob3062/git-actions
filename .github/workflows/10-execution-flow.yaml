name: 10 - Controlling the execution flow
on:
  workflow_dispatch:
    inputs:
      pass_unit_tests:
        description: 'Set to true to pass unit tests'
        type: boolean
        default: false
jobs:
  lint-build:
    runs-on: ubuntu-latest
    steps:
      - name: Lint and build
        run: |
          echo "Linting the code..."
          echo "Building the project..."
  unit-tests:
    runs-on: ubuntu-latest
    steps:
    - name: Run Unit Tests
      run: echo "Running tests..."
    - name: Failing Tests
      if: ${{ !inputs.pass_unit_tests }}
      run: exit 1
  deploy_non-prod:
    runs-on: ubuntu-latest
    needs:
      - lint-build
      - unit-tests
    steps:
      - name: Deploy to Non-Prod
        run: echo "Deploying to non-production environment..."
  e2e-tests:
    runs-on: ubuntu-latest
    needs:
      - deploy_non-prod
    steps:
      - name: Run E2E Tests
        run: echo "Running end-to-end tests..."
  load-tests:
    runs-on: ubuntu-latest
    needs:
      - deploy_non-prod
    steps:
      - name: Run Load Tests
        run: echo "Running load tests..."
  deploy_prod:
    runs-on: ubuntu-latest
    needs:
      - e2e-tests
      - load-tests
    steps:
      - name: Deploy to Production
        run: echo "Deploying to production environment..."  